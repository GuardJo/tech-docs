> Java에서 제공하는 동기화 기능이 포함된 Collection Framework

# Collection의 동기화 문제
Java에서 여러 자료 구조에 대한 구현체 패키지인 [**Collection Framework**](../IntermediateJava/2.%20Collection%20Framework.md)의 경우 다양한 데이터 집합에 대한 관리 등을 위해 많은 개발자들이 사용하는 패키지 및 기능이다.

또한 Java에서는 **Multi Thread** 환경을 고려하여 개발된 언어이기에 많은 사용자들이 **Multi Thread** 환경에서 여러 데이터 구조를 사용할 수 있도록 제공하고 있다.

```java
List<String> list = new ArrayList<>();

Runnable task1 = () -> {
    list.add("A");
};
Runnable task2 = () -> {
    list.add("B");
};

Thread thread1 = new Thread(task1);
Thread thread2 = new Thread(task2);

thread1.start();
thread2.start();
```
하지만 기대와 달리 예를 들어 위와 같이 [`ArrayList`](../IntermediateJava/3.%20ArrayList.md)를 **Multi Thread**에서 사용할 경우, 정상적으로 데이터가 저장되지 않고 [**동시성 문제**](11.%20Synchronized.md)가 발생하게 된다.

이는 **Collection Framework**에 해당하는 각종 구현체들은 정작 **Multi Thread** 환경에서의 **동시성 문제**가 고려되지 않았기 때문이다.

```java
class ArrayList<E> {
	...
	public boolean add(E e) {  
	    modCount++;  
	    add(e, elementData, size);  
	    return true;  
	}
	...
}
```

실제로 위와 같이 `ArrayList`의 경우 데이터 주입 시 별도의 `Lock` 인터페이스나 `synchronized` 키워드를 통한 **동기화** 작업이 수반되지 않은 채로 제공 되고 있다.

> [!NOTE]
> **Thread Safe**
> 
> 어떤 특정 객체가 **Multi Thread** 환경에서도 **동시성 이슈**가 발생되지 않고 **동기화** 상태를 유지하는 것을 **Thread Safe**하다고 표현한다.